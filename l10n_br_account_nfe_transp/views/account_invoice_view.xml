<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="transp_frete_tree" model="ir.ui.view">
        <field name="name">transp.frete.tree</field>
        <field name="model">transp.frete</field>
        <field name="arch" type="xml">
            <tree>
                <field name="nfe40_transporta" />
                <field name="incoterm_id" />
                <field name="carrier_id" invisible="1"/>
                <field name="vehicle" />
                <field name="nfe40_qVol" />
                <field name="nfe40_esp" />
                <field name="nfe40_marca" />
                <field name="nfe40_nVol" />
                <field name="nfe40_pesoL" />
                <field name="nfe40_pesoB" />
            </tree>
        </field>
    </record>

    <record id="transp_frete_form" model="ir.ui.view">
        <field name="name">transp.frete.form</field>
        <field name="model">transp.frete</field>
        <field name="arch" type="xml">
            <form string="Dados Tranporte">
                <sheet>
                    <group>
                        <field name="nfe40_transporta" />
                        <field name="incoterm_id" />
                        <field name="carrier_id"  invisible="1" />
                        <field name="vehicle_id" context="{'default_carrier_id': carrier_id, 'default_active': True}" domain="[('carrier_id', '=', carrier_id)]" />
                        <field name="vehicle" />
                        <field name="message_warning" readonly="1" colors="yellow"/>
                    </group>
                    <group>                        
                        <field name="nfe40_qVol" />
                        <field name="nfe40_esp" />
                        <field name="nfe40_marca" />
                        <field name="nfe40_nVol" />
                        <field name="nfe40_pesoL" />
                        <field name="nfe40_pesoB" />
                    </group>
                    <field name="message_warning" />
                </sheet>
            </form>
        </field>
    </record>

    <record id="l10n_br_delivery_carrier_vehicle_form" model="ir.ui.view">
        <field name="name">l10n_br_delivery.carrier.vehicle.form</field>
        <field name="model">l10n_br_delivery.carrier.vehicle</field>
        <field name="inherit_id" ref="l10n_br_delivery.l10n_br_delivery_carrier_vehicle_form" />
        <field name="arch" type="xml">
            <field name="driver" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="manufacture_year" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="model_year" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="type" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="city_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
        </field>
    </record>

    <!-- Customer Invoice views -->
    <record id="account_invoice_transp_form" model="ir.ui.view">
        <field name="name">l10n_br_account.invoice.transp.form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="l10n_br_account.invoice_form" />
        <field name="priority">399</field>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='other_info']" position="after">
                <page name="transp_frete" string="Transporte/Frete" >
                    <!-- <header>
                        <button
                            name="button_nfe_transp"
                            string="Adicionar"
                            class="btn-success"
                            type="object"
                            attrs="{'invisible': [('state', '!=', 'draft')]}"
                        />
                    </header> -->
                    <field name="trans_ids" context="{'default_am_id': active_id}" >
                        <tree string="Info Transporte">
                            <field name="incoterm_id" />
                            <field name="carrier_id" invisible="1" />
                            <field name="nfe40_transporta" />
                            <field name="vehicle_id" />
                            <field name="nfe40_qVol" />
                            <field name="nfe40_esp" />
                            <field name="nfe40_marca" />
                            <field name="nfe40_nVol" />
                            <field name="nfe40_pesoL" />
                            <field name="nfe40_pesoB" />
                        </tree>
                        <form>
                            <sheet>
                                <group string="Info Transporte">
                                    <group>
                                        <field name="incoterm_id" />
                                        <field name="carrier_id" invisible="1" />
                                        <field name="nfe40_transporta" />
                                        <field name="vehicle_id" context="{'default_carrier_id': carrier_id, 'default_active': True}" domain="[('carrier_id', '=', carrier_id)]" />
                                        <field name="vehicle" readonly="1" />
                                        <field name="plate" readonly="1" />
                                        <field name="rntc_code" readonly="1" />
                                        <field name="state_id" readonly="1" />
                                        <!-- <field name="message_warning" readonly="1" /> -->
                                    </group>
                                    <group>
                                        <field name="nfe40_qVol" />
                                        <field name="nfe40_esp" />
                                        <field name="nfe40_marca" />
                                        <field name="nfe40_nVol" />
                                        <field name="nfe40_pesoL" />
                                        <field name="nfe40_pesoB" />
                                    </group>
                                </group>
                                <field name="message_warning" widget="statinfo" bg_color="bg-danger" />
                            </sheet>
                        </form>
                    </field>
                </page>
            </xpath>
            <field name="invoice_incoterm_id" position="replace">
                <field name="invoice_incoterm_id" string="Tipo Frete" />
                <field name="carrier_id" />
            </field>
        </field>
    </record>

</odoo>